 {% extends "index.html" %}
 
 {% block section %}
<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìƒí’ˆ ë“±ë¡ í™”ë©´</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/reg_items_style.css') }}">
</head>

<body>
  <main>

    <form action="/submit_item_post" method="post" enctype="multipart/form-data">

    <header class = "header">
      <h1 class = "title">ìƒí’ˆ ë“±ë¡</h1>
      <p class = "description">íŒë§¤í•˜ì‹¤ ìƒí’ˆì˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
    </header>

    <!--íŒë§¤ì ì •ë³´-->
    <section class = "container">
      <h2 class = "heading">íŒë§¤ì ì •ë³´</h2>

      <div class = "input">
        <label class = "label" for="id">ì•„ì´ë”” *</label>
        <input class = "input_box" type="text" name="id" id="id" 
               value="{{ user_id | default('ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ') }}" 
               readonly>
        </div>

      <div class = "input">
        <label class = "label" for="tel">ì—°ë½ì²˜ *</label>
        <input class = "input_box" type="text" name="tel" id="tel" value="{{ user_phone | default('ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ') }}" readonly>
      </div>

      <div class = "input">
        <label class = "label" for="addr">ì£¼ì†Œ *</label>
        <input class = "input_box" type="text" name="addr" id="addr" placeholder = "ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
      </div>

      <div class = "input">
        <label class = "label" for="type">ê±°ë˜ ë°©ì‹ *</label>
        <select class = "input_box" id="type" name="type" required>
        <option value="" disabled selected hidden>ì›í•˜ì‹œëŠ” ê±°ë˜ ë°©ì‹ì„ ì„ íƒí•˜ì„¸ìš”</option>
        <option value="direct">ì§ê±°ë˜</option>
        <option value="delivery">íƒë°°ê±°ë˜</option>
        </select>
      </div>
    </section>

    <!--ìƒí’ˆ ì •ë³´-->
    <section class = "container">
      <h2 class = "heading">ìƒí’ˆ ì •ë³´</h2>

      <div class = "input">
        <label class = "label" for="item">ìƒí’ˆëª… *</label>
        <input class = "input_box" type="text" name="item" id="item" placeholder = "ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
      </div>

      <div class = "input">
        <label class = "label" for="price">ê°€ê²© *</label>
        <input class = "input_box" type="number" name="price" id="price" placeholder = "0" min = "0" required>
      </div>

      <div class = "input">
        <label class = "label" for="status">ìƒí’ˆ ìƒíƒœ *</label>
        <select class = "input_box" id="status" name="status" required>
        <option value="" disabled selected hidden>ìƒíƒœë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
        <option value="best">ì•„ì£¼ ì¢‹ìŒ</option>
        <option value="good">ì¢‹ìŒ</option>
        <option value="fair">ë³´í†µ</option>
        <option value="bad">ë‚˜ì¨</option>
        <option value="worst">ë§¤ìš° ë‚˜ì¨</option>
        </select>
      </div>

      <div class = "input">
        <label class = "label" for="category">ì¹´í…Œê³ ë¦¬ *</label>
        <select class = "input_box" id="category" name="category" required>
        <option value="" disabled selected hidden>ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
        <option value="Clothes"> Clothes </option>
        <option value="Books"> Books </option>
        <option value="Digitals"> Digitals </option>
        <option value="ETC"> Etc </option>
        </select>
      </div>

      <div class = "input">
        <label class = "label" for="explain">ìƒí’ˆ ì„¤ëª…</label>
        <textarea class = "input_box" id = "explain" name = "explain" placeholder = "ìƒí’ˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš” &#10;&#10;- êµ¬ì„± ì„¸íŠ¸&#10;- ì‚¬ìš© ê¸°ê°„&#10;- í•˜ì ì—¬ë¶€&#10;- ê¸°íƒ€ íŠ¹ì´ì‚¬í•­"></textarea>
      </div>
    </div>

    <!--ìƒí’ˆ ì‚¬ì§„-->
    <section class = "container">
      <h2 class = "heading">ìƒí’ˆ ì‚¬ì§„</h2>
      <p class = "description small">ì‚¬ì§„ì€ ìµœëŒ€ 5ì¥ê¹Œì§€ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

      <div class = img_upload_box>
        <div class="img_preview" id="imagePreview"></div>
        <div class = "img_upload">
          <!--ì‹¤ì œ íŒŒì¼ ì…ë ¥ ë²„íŠ¼ì€ ìˆ¨ê¹€ ì²˜ë¦¬-->
          <input type="file" id = "file" name="file" multiple hidden/>
          <!--ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ëŠ” ë²„íŠ¼-->
          <label for="file" class = "upload_btn">
            <div class = "icon">ğŸ“·</div>
            <div class = "description small">ì‚¬ì§„ ì¶”ê°€</div>
          </label>
        </div>
      </div>
    </section>


    <div class = "btn">
      <input type="submit" value="ìƒí’ˆ ë“±ë¡í•˜ê¸°">
      <input type="reset" value="ì·¨ì†Œ">
    </div>

    </form>
  </main>
</body>


<script>
  let selectedFiles = [];

  document.getElementById('file').addEventListener('change', function(e) {
    var preview = document.getElementById('imagePreview');
    var newFiles = Array.from(e.target.files);
    
    if (selectedFiles.length + newFiles.length > 5) {
      alert("ì‚¬ì§„ì€ ìµœëŒ€ 5ì¥ê¹Œì§€ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤. í˜„ì¬ " + selectedFiles.length + "ì¥ ì„ íƒë¨.");
      e.target.value = "";
      return;
    }
    
    selectedFiles = selectedFiles.concat(newFiles);
    
    preview.innerHTML = "";
    
    selectedFiles.forEach(function(file) {
      var reader = new FileReader();
      
      reader.onload = function(event) {
        var img = document.createElement("img");
        img.src = event.target.result;
        preview.appendChild(img);
      };
      
      reader.readAsDataURL(file);
    });
    

    var dataTransfer = new DataTransfer();
    selectedFiles.forEach(function(file) {
      dataTransfer.items.add(file);
    });
    e.target.files = dataTransfer.files;
  });
</script>

{% endblock section %}